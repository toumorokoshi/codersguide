
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Webservice Cid Pattern Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        <meta name="author" content="Yusuke Tsutsumi">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="project_management.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Opinion
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="code_organization_python.html">
            
                <a href="code_organization_python.html">
            
                    
                    Code Organization Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="project_management.html">
            
                <a href="project_management.html">
            
                    
                    Project Management
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.3" data-path="webservice_cid_pattern.html">
            
                <a href="webservice_cid_pattern.html">
            
                    
                    Webservice Cid Pattern
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Optimization
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../optimization/cache_affinity.html">
            
                <a href="../optimization/cache_affinity.html">
            
                    
                    Cache Affinity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../optimization/how_to_optimize.html">
            
                <a href="../optimization/how_to_optimize.html">
            
                    
                    How To Optimize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../optimization/linearization.html">
            
                <a href="../optimization/linearization.html">
            
                    
                    Linearization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../optimization/memoization.html">
            
                <a href="../optimization/memoization.html">
            
                    
                    Memoization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../testing/testing.html">
            
                <a href="../testing/testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Testing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../testing/unit_testing.html">
            
                <a href="../testing/unit_testing.html">
            
                    
                    Unit Testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Uncategorized
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../uncategorized/context_switches.html">
            
                <a href="../uncategorized/context_switches.html">
            
                    
                    Context Switches
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../uncategorized/debugging_applications.html">
            
                <a href="../uncategorized/debugging_applications.html">
            
                    
                    Debugging Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../uncategorized/debugging_performance.html">
            
                <a href="../uncategorized/debugging_performance.html">
            
                    
                    Debugging Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../uncategorized/forward.html">
            
                <a href="../uncategorized/forward.html">
            
                    
                    Forward
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../uncategorized/high_cpu.html">
            
                <a href="../uncategorized/high_cpu.html">
            
                    
                    High Cpu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../uncategorized/high_load_average.html">
            
                <a href="../uncategorized/high_load_average.html">
            
                    
                    High Load Average
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../uncategorized/high_memory_usage.html">
            
                <a href="../uncategorized/high_memory_usage.html">
            
                    
                    High Memory Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../uncategorized/process_vs_threading.html">
            
                <a href="../uncategorized/process_vs_threading.html">
            
                    
                    Process Vs Threading
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Z Sandbox
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" >
            
                <span>
            
                    
                    Patterns
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="../z_sandbox/patterns/isolating_ui.html">
            
                <a href="../z_sandbox/patterns/isolating_ui.html">
            
                    
                    Isolating Ui
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="../z_sandbox/patterns/sleeps_are_bad.html">
            
                <a href="../z_sandbox/patterns/sleeps_are_bad.html">
            
                    
                    Sleeps Are Bad
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../z_sandbox/01_cost_of_testing.html">
            
                <a href="../z_sandbox/01_cost_of_testing.html">
            
                    
                    01 Cost Of Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../z_sandbox/05_keep_tests_fast.html">
            
                <a href="../z_sandbox/05_keep_tests_fast.html">
            
                    
                    05 Keep Tests Fast
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../z_sandbox/cost.html">
            
                <a href="../z_sandbox/cost.html">
            
                    
                    Cost
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../z_sandbox/forward.html">
            
                <a href="../z_sandbox/forward.html">
            
                    
                    Forward
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../z_sandbox/fullstack.html">
            
                <a href="../z_sandbox/fullstack.html">
            
                    
                    Fullstack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../z_sandbox/keep_tests_small.html">
            
                <a href="../z_sandbox/keep_tests_small.html">
            
                    
                    Keep Tests Small
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../z_sandbox/risk.html">
            
                <a href="../z_sandbox/risk.html">
            
                    
                    Risk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="../z_sandbox/ui.html">
            
                <a href="../z_sandbox/ui.html">
            
                    
                    Ui
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../01_high_level.html">
            
                <a href="../01_high_level.html">
            
                    
                    01 High Level
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../CONTRIBUTING.html">
            
                <a href="../CONTRIBUTING.html">
            
                    
                    CONTRIBUTING
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../notes.html">
            
                <a href="../notes.html">
            
                    
                    Notes
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Webservice Cid Pattern</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="cid-consumer-internal-datasource">CID: Consumer-Internal-Datasource</h1>
<p>The CID pattern introduces a general code organization scheme,
desgined to protect and encapsulate common changes to code:</p>
<ol>
<li>change to an interface, to provide compatability. (Consumer)</li>
<li>changes to the datatstore, for performance or architecture. (Datasource)</li>
<li>change to behaviour, which is typically agnostic from interface or data storage (Internal)</li>
</ol>
<p>These are the three layers: consumer, internal, and datasource. Thus, the pattern is named CID.</p>
<h1 id="cid-is-good-for-design">CID is good for design</h1>
<p>Each layer represents the mindset to have, when considering the design
of that layer. It is true that many changes affect the whole
stack. However, the abstraction is still very important for
refactoring.</p>
<h2 id="design-for-the-consumer">Design for the Consumer</h2>
<p>Designing for the consumer is thinking about the user interaction. How
does the user best interact with your application? How can I ensure the user only
sees the complexity they need to say?</p>
<h2 id="design-for-the-datasource">Design for the Datasource</h2>
<p>Designing the datasource is mainly about performance and
correctness. How can I ensure an operation is performed efficiently?
How can I ensure that data integrity is preserved?</p>
<h2 id="design-for-the-internal">Design for the Internal</h2>
<p>Designing interally is a lot about code organization and
architecture. There are no hard and fast rules about any of the
layers, but the internal definitons are very loose.</p>
<h1 id="cid-is-good-for-refactoring">CID is good for refactoring</h1>
<h2 id="changing-datasources-entirely">Changing datasources entirely</h2>
<p>Since the interface and expectations are well abstracted, switching
datasources comes down to building functions that can directly replace
than functonality.</p>
<h2 id="changing-interfaces-eg-http-to-grpc">Changing interfaces (e.g. http to grpc)</h2>
<p>As the interfaces are abstracted from the internal representation,
supported a new interface type becomes:</p>
<ol>
<li>write a converter to and from the internal represention to the new interface</li>
<li>add the interface to your code.</li>
</ol>
<p>That&apos;s it! The interface function should also be trivial, since it&apos;s a
matter of converting to and from the interface you&apos;re targetting.</p>
<h1 id="cid-and-data-structures">CID and data structures</h1>
<p>In an ideal CID pattern, there is only one datastructure or object per
concept. Concerns like multiple versions of the interface is delegated
to the interface layer, while anything specific to the datasource
(e.g.  denormalizing data to ensure faster queries) should be
encapsulated in the datasource.</p>
<p>By following this rule, the internal code becomes a clean description
of the behavior of the service itself.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="project_management.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Project Management">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Webservice Cid Pattern","level":"1.2.3","depth":2,"next":{"title":"Optimization","level":"1.3","depth":1,"ref":"","articles":[{"title":"Cache Affinity","level":"1.3.1","depth":2,"path":"optimization/cache_affinity.md","ref":"optimization/cache_affinity.md","articles":[]},{"title":"How To Optimize","level":"1.3.2","depth":2,"path":"optimization/how_to_optimize.md","ref":"optimization/how_to_optimize.md","articles":[]},{"title":"Linearization","level":"1.3.3","depth":2,"path":"optimization/linearization.md","ref":"optimization/linearization.md","articles":[]},{"title":"Memoization","level":"1.3.4","depth":2,"path":"optimization/memoization.md","ref":"optimization/memoization.md","articles":[]}]},"previous":{"title":"Project Management","level":"1.2.2","depth":2,"path":"opinion/project_management.md","ref":"opinion/project_management.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Yusuke Tsutsumi","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"opinion/webservice_cid_pattern.md","mtime":"2017-05-22T02:31:36.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-05-30T05:07:30.230Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

